/*
Module: Agent integrations
Description: Wrapper module to include auto loading integrations
*/
argument "namespace" {
	// comment = "Namespace of the integrations config"
	optional = true
	default  = "default"
}

argument "forward_to" { }

/********************************************
 * Mysql Integrations
 ********************************************/
remote.kubernetes.configmap "integrations_mysql" {
	name      = "integrations-mysql-config"
	namespace = argument.namespace.value
}

/*
module.string "mysql_metrics" {
	content = remote.kubernetes.configmap.integrations_mysql.data["metrics.river"]

	arguments {
		namespace   = "mysql-system"
		secret_name = "integrations-mysql-secret"
		instance    = "primary"
		forward_to  = argument.forward_to.value
	}
}
*/

/********************************************
 * Memcached Integrations
 ********************************************/
remote.kubernetes.configmap "integrations_memcached" {
	name      = "integrations-memcached-config"
	namespace = argument.namespace.value
}

/*
module.string "memcached_metrics" {
	content = remote.kubernetes.configmap.integrations_memcached.data["metrics.river"]

	arguments {
		namespace   = "memcached-system"
		secret_name = "integrations-memcached-secret"
		instance    = "primary"
		forward_to  = argument.forward_to.value
	}
}
*/
